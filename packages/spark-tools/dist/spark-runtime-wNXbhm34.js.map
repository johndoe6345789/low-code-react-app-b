{"version":3,"file":"spark-runtime-wNXbhm34.js","sources":["../src/lib/spark-runtime.ts"],"sourcesContent":["/**\n * Spark Runtime - Core runtime services for Spark applications\n * \n * This module provides mock implementations of Spark services including:\n * - KV storage (key-value store)\n * - LLM service (language model integration)\n * - User authentication\n */\n\n// Type definitions for LLM responses\ninterface LLMChatResponse {\n  role: string\n  content: string\n}\n\n// Mock KV Storage\nconst kvStorage = new Map<string, any>()\n\n// Create llm function with additional properties\nconst llmFunction = async (prompt: string, model?: string, jsonMode?: boolean): Promise<string> => {\n  console.log('Mock LLM called with prompt:', prompt, 'model:', model, 'jsonMode:', jsonMode)\n  return 'This is a mock response from the Spark LLM service.'\n}\n\nllmFunction.chat = async (messages: any[]): Promise<LLMChatResponse> => {\n  console.log('Mock LLM chat called with messages:', messages)\n  return {\n    role: 'assistant',\n    content: 'This is a mock response from the Spark LLM service.'\n  }\n}\n\nllmFunction.complete = async (prompt: string): Promise<string> => {\n  console.log('Mock LLM complete called with prompt:', prompt)\n  return 'This is a mock completion from the Spark LLM service.'\n}\n\nexport const sparkRuntime = {\n  kv: {\n    get: <T = any>(key: string): T | undefined => {\n      try {\n        const value = kvStorage.get(key)\n        if (value !== undefined) {\n          return value as T\n        }\n        const stored = localStorage.getItem(key)\n        return stored ? JSON.parse(stored) : undefined\n      } catch (error) {\n        console.error('Error getting KV value:', error)\n        return undefined\n      }\n    },\n    set: (key: string, value: any) => {\n      try {\n        kvStorage.set(key, value)\n        localStorage.setItem(key, JSON.stringify(value))\n      } catch (error) {\n        console.error('Error setting KV value:', error)\n      }\n    },\n    delete: (key: string) => {\n      try {\n        kvStorage.delete(key)\n        localStorage.removeItem(key)\n      } catch (error) {\n        console.error('Error deleting KV value:', error)\n      }\n    },\n    clear: () => {\n      try {\n        // Get keys before clearing\n        const keysToRemove = Array.from(kvStorage.keys())\n        kvStorage.clear()\n        // Clear corresponding keys from localStorage\n        keysToRemove.forEach(key => localStorage.removeItem(key))\n      } catch (error) {\n        console.error('Error clearing KV storage:', error)\n      }\n    },\n    keys: () => Array.from(kvStorage.keys())\n  },\n  \n  llm: llmFunction,\n  \n  user: {\n    getCurrentUser: () => ({\n      id: 'mock-user-id',\n      name: 'Mock User',\n      email: 'mock@example.com'\n    }),\n    isAuthenticated: () => true\n  }\n}\n"],"names":["kvStorage","Map","llmFunction","async","prompt","model","jsonMode","console","log","chat","messages","role","content","complete","sparkRuntime","kv","get","key","value","undefined","stored","localStorage","getItem","JSON","parse","error","set","setItem","stringify","delete","removeItem","clear","keysToRemove","Array","from","keys","forEach","llm","user","getCurrentUser","id","name","email","isAuthenticated"],"mappings":"AAgBA,MAAMA,EAAY,IAAIC,IAGhBC,EAAcC,MAAOC,EAAgBC,EAAgBC,KACzDC,QAAQC,IAAI,+BAAgCJ,EAAQ,SAAUC,EAAO,YAAaC,GAC3E,uDAGTJ,EAAYO,KAAON,MAAOO,IACxBH,QAAQC,IAAI,sCAAuCE,GAC5C,CACLC,KAAM,YACNC,QAAS,wDAIbV,EAAYW,SAAWV,MAAOC,IAC5BG,QAAQC,IAAI,wCAAyCJ,GAC9C,yDAGF,MAAMU,EAAe,CAC1BC,GAAI,CACFC,IAAeC,IACb,IACE,MAAMC,EAAQlB,EAAUgB,IAAIC,GAC5B,QAAcE,IAAVD,EACF,OAAOA,EAET,MAAME,EAASC,aAAaC,QAAQL,GACpC,OAAOG,EAASG,KAAKC,MAAMJ,QAAUD,CACvC,CAAE,MAAOM,GAEP,YADAlB,QAAQkB,MAAM,0BAA2BA,EAE3C,GAEFC,IAAK,CAACT,EAAaC,KACjB,IACElB,EAAU0B,IAAIT,EAAKC,GACnBG,aAAaM,QAAQV,EAAKM,KAAKK,UAAUV,GAC3C,CAAE,MAAOO,GACPlB,QAAQkB,MAAM,0BAA2BA,EAC3C,GAEFI,OAASZ,IACP,IACEjB,EAAU6B,OAAOZ,GACjBI,aAAaS,WAAWb,EAC1B,CAAE,MAAOQ,GACPlB,QAAQkB,MAAM,2BAA4BA,EAC5C,GAEFM,MAAO,KACL,IAEE,MAAMC,EAAeC,MAAMC,KAAKlC,EAAUmC,QAC1CnC,EAAU+B,QAEVC,EAAaI,QAAQnB,GAAOI,aAAaS,WAAWb,GACtD,CAAE,MAAOQ,GACPlB,QAAQkB,MAAM,6BAA8BA,EAC9C,GAEFU,KAAM,IAAMF,MAAMC,KAAKlC,EAAUmC,SAGnCE,IAAKnC,EAELoC,KAAM,CACJC,eAAgB,KAAA,CACdC,GAAI,eACJC,KAAM,YACNC,MAAO,qBAETC,gBAAiB,KAAM"}