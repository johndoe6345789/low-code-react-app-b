{
  "id": "save-indicator",
  "dataSources": [
    {
      "id": "lastSaved",
      "type": "static",
      "defaultValue": null
    },
    {
      "id": "currentTime",
      "type": "static",
      "defaultValue": 0,
      "polling": {
        "interval": 10000,
        "update": "() => Date.now()"
      }
    }
  ],
  "type": "div",
  "props": {
    "className": "flex items-center gap-1.5 text-xs text-muted-foreground"
  },
  "conditional": {
    "if": "lastSaved !== null"
  },
  "children": [
    {
      "id": "status-icon",
      "type": "StatusIcon",
      "dataBinding": {
        "type": {
          "source": "currentTime",
          "transform": "(value, context) => { if (!context.lastSaved) return 'synced'; return Date.now() - context.lastSaved < 3000 ? 'saved' : 'synced'; }"
        },
        "animate": {
          "source": "currentTime",
          "transform": "(value, context) => Boolean(context.lastSaved && Date.now() - context.lastSaved < 3000)"
        }
      }
    },
    {
      "id": "time-text",
      "type": "span",
      "props": {
        "className": "hidden sm:inline"
      },
      "dataBinding": {
        "children": {
          "source": "currentTime",
          "transform": "(value, context) => { if (!context.lastSaved) return ''; const diffSeconds = Math.floor((Date.now() - context.lastSaved) / 1000); if (diffSeconds < 3) return 'Saved'; if (diffSeconds < 60) return 'just now'; if (diffSeconds < 3600) return `${Math.floor(diffSeconds / 60)}m ago`; if (diffSeconds < 86400) return `${Math.floor(diffSeconds / 3600)}h ago`; return `${Math.floor(diffSeconds / 86400)}d ago`; }"
        }
      }
    }
  ]
}
