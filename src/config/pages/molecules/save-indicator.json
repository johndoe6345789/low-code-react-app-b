{
  "id": "save-indicator",
  "dataSources": [
    {
      "id": "lastSaved",
      "type": "static",
      "defaultValue": null
    },
    {
      "id": "currentTime",
      "type": "static",
      "defaultValue": 0,
      "polling": {
        "interval": 10000,
        "update": "() => Date.now()"
      }
    },
    {
      "id": "isRecent",
      "type": "static",
      "expression": "isRecentTimestamp(data.lastSaved, data.currentTime, 3000)",
      "defaultValue": false
    },
    {
      "id": "timeAgo",
      "type": "static",
      "expression": "timeAgo(data.lastSaved, data.currentTime)",
      "defaultValue": ""
    }
  ],
  "type": "div",
  "props": {
    "className": "flex items-center gap-1.5 text-xs text-muted-foreground"
  },
  "conditional": {
    "if": "lastSaved !== null"
  },
  "children": [
    {
      "id": "status-icon",
      "type": "StatusIcon",
      "dataBinding": {
        "type": {
          "source": "isRecent",
          "transform": "isRecent => isRecent ? 'saved' : 'synced'"
        },
        "animate": {
          "source": "isRecent"
        }
      }
    },
    {
      "id": "time-text",
      "type": "span",
      "props": {
        "className": "hidden sm:inline"
      },
      "dataBinding": {
        "children": {
          "source": "isRecent",
          "path": null,
          "transform": "(isRecent, data) => isRecent ? 'Saved' : data.timeAgo"
        }
      }
    }
  ]
}
